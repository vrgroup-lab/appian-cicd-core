@startuml
left to right direction
skinparam shadowing false
skinparam defaultFontName Monospace
skinparam linetype ortho

node "GitHub" as GH {
  rectangle "Repos de Aplicación" as GH_APPS {
    node "Repo App A" as GH_A {
      artifact "deploy.yml (wrapper)" as D_A
    }
    GH_A -[hidden]down- RepoAppB
    node "Repo App B" as RepoAppB {
      artifact "deploy.yml (wrapper)" as D_B
    }
    RepoAppB -[hidden]down- RepoAppN
    node "Repo App N" as RepoAppN {
      artifact "deploy.yml (wrapper)" as D_N
    }
  }

  node "Repo Core" as GH_CORE {
    package "Workflows Core" as COREPKG {
      artifact "export.yml"  as WF_EXPORT
      artifact "promote.yml" as WF_PROMOTE
    }
    artifact "CoreLib" as CORELIB
  }

  GH_APPS -[hidden]- GH_CORE
}

node "Appian Cloud" as APPCLOUD {
  node "Dev"  as DEV
  node "QA"   as QA
  node "Prod" as PROD
  component "Deployment APIs v2" as APIDEV2
}

' ==== Flujos ====
D_A --> COREPKG : workflow_call
D_B --> COREPKG : workflow_call
D_N --> COREPKG : workflow_call
COREPKG ..> CORELIB : dependencia (reuse)
COREPKG --> APIDEV2 : export/import
APIDEV2 --> DEV
APIDEV2 --> QA
APIDEV2 --> PROD

title **Arquitectura CI/CD Appian – Vista general**

legend right
  Rectángulos = Nodos/servicios
  Artifact = Workflows YAML en GitHub
  Flecha punteada = Dependencia
endlegend

@enduml
